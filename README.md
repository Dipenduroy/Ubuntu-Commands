# Ubuntu-Commands
Useful Commands for ubuntu

Check which process uses a specific port no.
-------------------------------------------------
lsof -i :{PORTNO}

Ex: lsof -i :5555

Result: 
COMMAND  PID        USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
java    8461 enlightened   11u  IPv6 138527      0t0  UDP *:8888

-In the above example it is seen that port 8888 is being held in use by the command java with pid 8461.
Now kill the process by doing any of the following

Kill a process by process id or command
-------------------------------------------------
kill {PID}
killall -9 {PID/COMMAND}

Ex: kill 8461
    killall -9 8461
    killall -9 java

Check tcp port details
-------------------------------------------------

netstat -t -ap

check tcp port 5555
-------------------------------------------------

netstat -ap | grep 5555


Check udp port details
-------------------------------------------------

netstat -u -ap

How to check the background process in Linux?
-------------------------------------------------

ps -l (list all process)
ps -ef (all full details of process)

What is the command to execute a php script in background?
-------------------------------------------------

Syntax: nohup exec arg1 arg2 > /dev/null &

Example: nohup exec php process.php hello world > /dev/null &

To see a tree view of processes
-------------------------------------------------

ps axjf

To get a more complete picture of the processes on this system
-------------------------------------------------
ps aux

Kill stopped consumers of rabbitmq
-------------------------------------------------
It kills all processes generated by php command

killall -9 php


Get all stopped processes with jobspec number in terminal which uses system memory,but not running
-------------------------------------------------
Syntax: jobs

Result:

[1]-  Stopped                 php supplier1.php
[2]+  Stopped                 php supplier1.php

To restart stopped process use foreground command
-------------------------------------------------
To start again a specific job use fg with jobspec number.

fg 1

fg 2

To start a background process
-------------------------------------------------
php supplier1.php > /dev/null 2>/dev/null &

OR(Both similar)

php supplier1.php &> /dev/null &

Create a service in ubuntu
-------------------------------------------------
Create a file [php-daemon.conf](../samples/php-daemon.conf) in /etc/init

```
# Info
description "PHP Daemon Worker"
author      "Dipendu"

# Events
start on startup
stop on shutdown

# Automatically respawn
respawn
respawn limit 20 5

# Run the script!
# Note, in this example, if your PHP script returns
# the string "ERROR", the daemon will stop itself.
script
    [ $(exec /usr/bin/php5.6 -d "default_socket_timeout=-1" -f /usr/share/nginx/html/sample/supplier1.php) = 'ERROR' ] && ( stop; exit 1; )
end script
```

Start/Stop a service:

sudo service php-daemon start
sudo service php-daemon stop